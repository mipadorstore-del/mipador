<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jacker Starter Dark Blue - Mipador</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="productdetails.css">
    <style>
        .thank-you-message {
            display: none;
            background-color: #28a745;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            text-align: center;
            font-weight: 500;
        }

        .thank-you-message.show {
            display: block;
        }
    </style>
</head>

<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <div class="language-dropdown">
            <button class="language-btn" onclick="toggleLanguageMenu()">
                <i class="fas fa-globe"></i>
                <span id="currentLang">EN</span>
                <i class="fas fa-chevron-down"></i>
            </button>
            <div class="language-menu" id="languageMenu">
                <div class="language-option" onclick="changeLanguage('en')">English</div>
                <div class="language-option" onclick="changeLanguage('fr')">Fran√ßais</div>
                <div class="language-option" onclick="changeLanguage('ar')">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="product-grid">
            <!-- Product Gallery -->
            <div class="product-gallery">
                <div class="main-image-container" onclick="openZoom(0)">
                    <img class="main-image" id="mainImage" src="images/jacker-starter-dark-blue-1.jpg"
                        alt="Jacker Starter Dark Blue">
                    <div class="zoom-hint">
                        <i class="fas fa-search-plus"></i>
                        <span data-translate="clickToZoom">Click to zoom</span>
                    </div>
                </div>

                <div class="thumbnail-gallery" id="thumbnailGallery">
                    <div class="thumbnail active" onclick="changeMainImage(this, 0)"
                        data-src="images/jacker-starter-dark-blue-1.jpg">
                        <img src="images/jacker-starter-dark-blue-1.jpg" alt="Front View">
                    </div>
                    <div class="thumbnail" onclick="changeMainImage(this, 1)"
                        data-src="images/jacker-starter-dark-blue-2.jpg">
                        <img src="images/jacker-starter-dark-blue-2.jpg" alt="Side View">
                    </div>
                    <div class="thumbnail" onclick="changeMainImage(this, 2)"
                        data-src="images/jacker-starter-dark-blue-3.jpg">
                        <img src="images/jacker-starter-dark-blue-3.jpg" alt="Back View">
                    </div>
                </div>
            </div>

            <!-- Product Details -->
            <div class="product-details">
                <h1 class="product-title" data-translate="productTitle">Jacker Starter Dark Blue</h1>
                <div class="product-price">350 MAD</div>

                <div class="urgency-banner">
                    <i class="fas fa-fire"></i>
                    <span data-translate="urgencyText">Hurry! Only 15 pieces left in stock!</span>
                </div>

                <div class="viewers-count">
                    <i class="fas fa-eye"></i>
                    <span data-translate="viewersText">8 people are viewing this right now</span>
                </div>

                <p class="product-description" data-translate="productDescription">
                    Embrace the night sky with our Jacker Starter Dark Blue jacket. Featuring a sleek design with a
                    moon-inspired logo, this jacket combines style and warmth, perfect for casual wear and stargazing
                    adventures.
                </p>

                <!-- Size Selector -->
                <div class="selector-section">
                    <h5 class="selector-title" data-translate="sizeLabel">Size</h5>
                    <div class="size-selector">
                        <div class="size-option" onclick="selectSize(this)">S</div>
                        <div class="size-option" onclick="selectSize(this)">M</div>
                        <div class="size-option active" onclick="selectSize(this)">L</div>
                        <div class="size-option" onclick="selectSize(this)">XL</div>
                        <div class="size-option" onclick="selectSize(this)">XXL</div>
                    </div>
                </div>

                <!-- Color Selector -->
                <div class="selector-section">
                    <h5 class="selector-title" data-translate="colorLabel">Color</h5>
                    <div class="color-selector">
                        <div class="color-option color-dark-blue active" onclick="selectColor(this)"
                            data-color="dark-blue" title="Dark Blue"></div>
                    </div>
                </div>

                <!-- Bundle Offers -->
                <div class="bundle-offers">
                    <h5 class="bundle-title" data-translate="bundleTitle">üéÅ Special Offers üéÅ</h5>

                    <div class="bundle-option active" onclick="selectBundle(this)" data-price="350" data-quantity="1">
                        <div class="bundle-content">
                            <span data-translate="bundle1">Buy 1 for 350 MAD + Free Shipping</span>
                            <span class="bundle-price">350 MAD</span>
                        </div>
                    </div>

                    <div class="bundle-option" onclick="selectBundle(this)" data-price="650" data-quantity="2">
                        <div class="bundle-content">
                            <span data-translate="bundle2">Buy 2 for 650 MAD + Free Shipping üéÅ</span>
                            <div>
                                <span class="bundle-price">650 MAD</span>
                                <span class="bundle-savings" data-translate="save50">Save 50 MAD</span>
                            </div>
                        </div>
                    </div>

                    <div class="bundle-option" onclick="selectBundle(this)" data-price="950" data-quantity="3">
                        <div class="bundle-content">
                            <span data-translate="bundle3">Buy 3 for 950 MAD + Free Shipping üéÅ</span>
                            <div>
                                <span class="bundle-price">950 MAD</span>
                                <span class="bundle-savings" data-translate="save100">Save 100 MAD</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Order Form -->
                <form id="orderForm" class="order-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label" data-translate="nameLabel">Full Name</label>
                            <input type="text" class="form-input" id="fullName" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-translate="phoneLabel">Phone Number</label>
                            <input type="tel" class="form-input" id="phone" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-translate="cityLabel">City</label>
                            <input type="text" class="form-input" id="city" required>
                        </div>
                    </div>
                    <button type="submit" class="order-btn" id="orderBtn">
                        <i class="fas fa-shopping-cart"></i>
                        <span data-translate="orderButton">Order Now - 350 MAD</span>
                    </button>
                    <div class="thank-you-message" id="thankYouMessage" data-translate="thankYouMessage">
                        Thank you for your order! We'll contact you soon to confirm.
                    </div>
                </form>

                <!-- Specifications -->
                <div class="specs-section">
                    <h5 class="selector-title" data-translate="specsTitle">Product Specifications</h5>
                    <ul class="specs-list">
                        <li class="specs-item">
                            <span class="spec-label" data-translate="materialLabel">Material</span>
                            <span class="spec-value" data-translate="materialValue">Wool Blend with Leather
                                Sleeves</span>
                        </li>
                        <li class="specs-item">
                            <span class="spec-label" data-translate="featuresLabel">Features</span>
                            <span class="spec-value" data-translate="featuresValue">Moon-Inspired Design,
                                Lightweight</span>
                        </li>
                        <li class="specs-item">
                            <span class="spec-label" data-translate="careLabel">Care</span>
                            <span class="spec-value" data-translate="careValue">Dry Clean Only</span>
                        </li>
                        <li class="specs-item">
                            <span class="spec-label" data-translate="warrantyLabel">Warranty</span>
                            <span class="spec-value" data-translate="warrantyValue">1 Year Limited</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Zoom Modal -->
    <div class="zoom-modal" id="zoomModal" onclick="closeZoom(event)">
        <div class="zoom-container">
            <img class="zoom-image" id="zoomImage" alt="Zoomed product image">
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="zoom-btn" onclick="closeZoom()" title="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="zoom-counter" id="zoomCounter">1 / 3</div>
        </div>
    </div>

    <!-- Footer Section -->
    <footer class="footer">
        <div class="container">
            <div class="d-flex justify-content-center" data-aos="fade-right" data-aos-duration="1000">
                <img src="images/logofooter.png" alt="Mipador Logo" class="footer-logo img-fluid" />
            </div>
            <div class="d-flex justify-content-center border-top border-light pt-4 mt-4">
                <p class="text-light-custom text-center mb-0">
                    ¬©2025 Mipador - Made to move free ü™Ω
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Global variables
        let currentImageIndex = 0;
        let zoomLevel = 1;
        let translateX = 0;
        let translateY = 0;
        let isDragging = false;
        let startX = 0;
        let startY = 0;
        let selectedBundle = { price: 350, quantity: 1 };
        let selectedSize = 'L';

        // Your Google Apps Script URL
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzIipteyDYaUeVA1qpamd9J9hCA4KOPkOq-jzyMn6VSmOizU9A50JwXDSEYVJk_bxQ_rg/exec';

        // Product images array
        const productImages = [
            { src: "images/jacker-starter-dark-blue-1.jpg", alt: "Front View" },
            { src: "images/jacker-starter-dark-blue-2.jpg", alt: "Side View" },
            { src: "images/jacker-starter-dark-blue-3.jpg", alt: "Back View" }
        ];

        // Translations (Updated with thank you message)
        const translations = {
            en: {
                productTitle: "Jacker Starter Dark Blue",
                urgencyText: "Hurry! Only 15 pieces left in stock!",
                viewersText: "8 people are viewing this right now",
                productDescription: "Embrace the night sky with our Jacker Starter Dark Blue jacket. Featuring a sleek design with a moon-inspired logo, this jacket combines style and warmth, perfect for casual wear and stargazing adventures.",
                sizeLabel: "Size",
                colorLabel: "Color",
                bundleTitle: "üéÅ Special Offers üéÅ",
                bundle1: "Buy 1 for 350 MAD + Free Shipping",
                bundle2: "Buy 2 for 650 MAD + Free Shipping üéÅ",
                bundle3: "Buy 3 for 950 MAD + Free Shipping üéÅ",
                save50: "Save 50 MAD",
                save100: "Save 100 MAD",
                orderTitle: "Complete Your Order",
                nameLabel: "Full Name",
                phoneLabel: "Phone Number",
                cityLabel: "City",
                orderButton: "Order Now - 350 MAD",
                specsTitle: "Product Specifications",
                materialLabel: "Material",
                materialValue: "Wool Blend with Leather Sleeves",
                featuresLabel: "Features",
                featuresValue: "Moon-Inspired Design, Lightweight",
                careLabel: "Care",
                careValue: "Dry Clean Only",
                warrantyLabel: "Warranty",
                warrantyValue: "1 Year Limited",
                clickToZoom: "Click to zoom",
                thankYouMessage: "Thank you for your order! We'll contact you soon to confirm."
            },
            fr: {
                productTitle: "Veste Jacker Starter Bleu Fonc√©",
                urgencyText: "D√©p√™chez-vous! Il ne reste que 15 pi√®ces en stock!",
                viewersText: "8 personnes regardent ceci en ce moment",
                productDescription: "Adoptez le ciel nocturne avec notre veste Jacker Starter Bleu Fonc√©. Dot√©e d'un design √©l√©gant avec un logo inspir√© de la lune, cette veste allie style et chaleur, parfaite pour un usage d√©contract√© et les aventures d'observation des √©toiles.",
                sizeLabel: "Taille",
                colorLabel: "Couleur",
                bundleTitle: "üéÅ Offres Sp√©ciales üéÅ",
                bundle1: "Achetez 1 pour 350 MAD + Livraison Gratuite",
                bundle2: "Achetez 2 pour 650 MAD + Livraison Gratuite üéÅ",
                bundle3: "Achetez 3 pour 950 MAD + Livraison Gratuite üéÅ",
                save50: "√âconomisez 50 MAD",
                save100: "√âconomisez 100 MAD",
                orderTitle: "Compl√©tez Votre Commande",
                nameLabel: "Nom Complet",
                phoneLabel: "Num√©ro de T√©l√©phone",
                cityLabel: "Ville",
                orderButton: "Commander Maintenant - 350 MAD",
                specsTitle: "Sp√©cifications du Produit",
                materialLabel: "Mat√©riau",
                materialValue: "M√©lange de Laine avec Manches en Cuir",
                featuresLabel: "Caract√©ristiques",
                featuresValue: "Design Inspir√© de la Lune, L√©ger",
                careLabel: "Entretien",
                careValue: "Nettoyage √† Sec Seulement",
                warrantyLabel: "Garantie",
                warrantyValue: "1 An Limit√©e",
                clickToZoom: "Cliquez pour zoomer",
                thankYouMessage: "Merci pour votre commande ! Nous vous contacterons bient√¥t pour confirmer."
            },
            ar: {
                productTitle: "ÿ≥ÿ™ÿ±ÿ© ÿ¨ÿßŸÉÿ± ÿ≥ÿ™ÿßÿ±ÿ™ÿ± ÿ≤ÿ±ŸÇÿßÿ° ÿØÿßŸÉŸÜÿ©",
                urgencyText: "ÿ£ÿ≥ÿ±ÿπ! ŸÑŸÖ Ÿäÿ™ÿ®ŸÇ ÿ≥ŸàŸâ 15 ŸÇÿ∑ÿπÿ© ŸÅŸä ÿßŸÑŸÖÿÆÿ≤ŸàŸÜ!",
                viewersText: "8 ÿ£ÿ¥ÿÆÿßÿµ Ÿäÿ¥ÿßŸáÿØŸàŸÜ Ÿáÿ∞ÿß ÿßŸÑÿ¢ŸÜ",
                productDescription: "ÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿßŸÑÿ≥ŸÖÿßÿ° ÿßŸÑŸÑŸäŸÑŸäÿ© ŸÖÿπ ÿ≥ÿ™ÿ±ÿ© ÿ¨ÿßŸÉÿ± ÿ≥ÿ™ÿßÿ±ÿ™ÿ± ÿ≤ÿ±ŸÇÿßÿ° ÿØÿßŸÉŸÜÿ©. ÿ™ÿ™ŸÖŸäÿ≤ ÿ®ÿ™ÿµŸÖŸäŸÖ ÿ£ŸÜŸäŸÇ ŸÖÿπ ÿ¥ÿπÿßÿ± ŸÖÿ≥ÿ™Ÿàÿ≠Ÿâ ŸÖŸÜ ÿßŸÑŸÇŸÖÿ±ÿå Ÿáÿ∞Ÿá ÿßŸÑÿ≥ÿ™ÿ±ÿ© ÿ™ÿ¨ŸÖÿπ ÿ®ŸäŸÜ ÿßŸÑÿ£ŸÜÿßŸÇÿ© ŸàÿßŸÑÿØŸÅÿ°ÿå ŸÖÿ´ÿßŸÑŸäÿ© ŸÑŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿπÿ±ÿ∂Ÿä ŸàŸÖÿ∫ÿßŸÖÿ±ÿßÿ™ ÿ±ÿ§Ÿäÿ© ÿßŸÑŸÜÿ¨ŸàŸÖ.",
                sizeLabel: "ÿßŸÑŸÖŸÇÿßÿ≥",
                colorLabel: "ÿßŸÑŸÑŸàŸÜ",
                bundleTitle: "üéÅ ÿπÿ±Ÿàÿ∂ ÿÆÿßÿµÿ© üéÅ",
                bundle1: "ÿßÿ¥ÿ™ÿ± 1 ÿ®ŸÄ 350 ÿØÿ±ŸáŸÖ + ÿ¥ÿ≠ŸÜ ŸÖÿ¨ÿßŸÜŸä",
                bundle2: "ÿßÿ¥ÿ™ÿ± 2 ÿ®ŸÄ 650 ÿØÿ±ŸáŸÖ + ÿ¥ÿ≠ŸÜ ŸÖÿ¨ÿßŸÜŸä üéÅ",
                bundle3: "ÿßÿ¥ÿ™ÿ± 3 ÿ®ŸÄ 950 ÿØÿ±ŸáŸÖ + ÿ¥ÿ≠ŸÜ ŸÖÿ¨ÿßŸÜŸä üéÅ",
                save50: "ŸàŸÅÿ± 50 ÿØÿ±ŸáŸÖ",
                save100: "ŸàŸÅÿ± 100 ÿØÿ±ŸáŸÖ",
                orderTitle: "ÿ£ŸÉŸÖŸÑ ÿ∑ŸÑÿ®ŸÉ",
                nameLabel: "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",
                phoneLabel: "ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ",
                cityLabel: "ÿßŸÑŸÖÿØŸäŸÜÿ©",
                orderButton: "ÿßÿ∑ŸÑÿ® ÿßŸÑÿ¢ŸÜ - 350 ÿØÿ±ŸáŸÖ",
                specsTitle: "ŸÖŸàÿßÿµŸÅÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨",
                materialLabel: "ÿßŸÑŸÖÿßÿØÿ©",
                materialValue: "ÿÆŸÑŸäÿ∑ ÿßŸÑÿµŸàŸÅ ŸÖÿπ ÿ£ŸÉŸÖÿßŸÖ ÿ¨ŸÑÿØŸäÿ©",
                featuresLabel: "ÿßŸÑŸÖŸäÿ≤ÿßÿ™",
                featuresValue: "ÿ™ÿµŸÖŸäŸÖ ŸÖÿ≥ÿ™Ÿàÿ≠Ÿâ ŸÖŸÜ ÿßŸÑŸÇŸÖÿ±ÿå ÿÆŸÅŸäŸÅ ÿßŸÑŸàÿ≤ŸÜ",
                careLabel: "ÿßŸÑÿπŸÜÿßŸäÿ©",
                careValue: "ÿ™ŸÜÿ∏ŸäŸÅ ÿ¨ÿßŸÅ ŸÅŸÇÿ∑",
                warrantyLabel: "ÿßŸÑÿ∂ŸÖÿßŸÜ",
                warrantyValue: "ÿ≥ŸÜÿ© Ÿàÿßÿ≠ÿØÿ© ŸÖÿ≠ÿØŸàÿØÿ©",
                clickToZoom: "ÿßŸÜŸÇÿ± ŸÑŸÑÿ™ŸÉÿ®Ÿäÿ±",
                thankYouMessage: "ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ∑ŸÑÿ®ŸÉ! ÿ≥ŸÜÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã ŸÑŸÑÿ™ÿ£ŸÉŸäÿØ."
            }
        };

        // Language functions
        function toggleLanguageMenu() {
            const menu = document.getElementById('languageMenu');
            menu.classList.toggle('active');
        }

        function changeLanguage(lang) {
            const currentLangSpan = document.getElementById('currentLang');
            const menu = document.getElementById('languageMenu');

            currentLangSpan.textContent = lang.toUpperCase();
            menu.classList.remove('active');

            // Update HTML attributes
            document.documentElement.lang = lang;
            if (lang === 'ar') {
                document.documentElement.dir = 'rtl';
            } else {
                document.documentElement.dir = 'ltr';
            }

            // Update content
            const translation = translations[lang];
            if (translation) {
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translation[key]) {
                        element.textContent = translation[key];
                    }
                });
                updateOrderButton();
            }

            localStorage.setItem('selectedLanguage', lang);
        }

        // Product functions
        function changeMainImage(thumbnail, index) {
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            thumbnail.classList.add('active');

            const mainImage = document.getElementById('mainImage');
            const imageData = productImages[index];
            mainImage.src = thumbnail.getAttribute('data-src');
            mainImage.alt = imageData.alt;

            currentImageIndex = index;
            document.querySelector('.main-image-container').setAttribute('onclick', `openZoom(${index})`);
        }

        function selectSize(sizeElement) {
            document.querySelectorAll('.size-option').forEach(size => {
                size.classList.remove('active');
            });
            sizeElement.classList.add('active');
            selectedSize = sizeElement.innerText;
        }

        function selectColor(colorElement) {
            document.querySelectorAll('.color-option').forEach(color => {
                color.classList.remove('active');
            });
            colorElement.classList.add('active');
        }

        function selectBundle(bundleElement) {
            document.querySelectorAll('.bundle-option').forEach(option => {
                option.classList.remove('active');
            });
            bundleElement.classList.add('active');

            selectedBundle.price = parseInt(bundleElement.dataset.price);
            selectedBundle.quantity = parseInt(bundleElement.dataset.quantity);

            updateOrderButton();
        }

        function updateOrderButton() {
            const orderBtn = document.getElementById('orderBtn');
            const currentLang = document.documentElement.lang || 'en';

            let buttonText = `Order Now - ${selectedBundle.price} MAD`;
            if (currentLang === 'fr') {
                buttonText = `Commander Maintenant - ${selectedBundle.price} MAD`;
            } else if (currentLang === 'ar') {
                buttonText = `ÿßÿ∑ŸÑÿ® ÿßŸÑÿ¢ŸÜ - ${selectedBundle.price} ÿØÿ±ŸáŸÖ`;
            }

            orderBtn.querySelector('span').textContent = buttonText;
        }

        // Form submission function
        async function submitOrder(event) {
            event.preventDefault();

            const fullName = document.getElementById('fullName').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const city = document.getElementById('city').value.trim();

            // Validate form
            if (!fullName || !phone || !city) {
                alert("Please fill in all required fields.");
                return;
            }

            // Get the current bundle offer text
            const selectedBundleElement = document.querySelector('.bundle-option.active');
            const bundleText = selectedBundleElement.querySelector('[data-translate]').textContent;

            // Prepare data for Google Apps Script
            const orderData = {
                ProductName: "Jacker Starter Dark Blue",
                Taille: selectedSize,
                NomComplet: fullName,
                PhoneNumber: phone,
                City: city,
                Status: "Pending",
                Offre: bundleText,
                Note: ""
            };

            const orderBtn = document.getElementById('orderBtn');
            const originalText = orderBtn.querySelector('span').textContent;

            try {
                // Show loading state
                orderBtn.disabled = true;
                orderBtn.querySelector('span').textContent = 'Sending...';

                // ‚úÖ Call Netlify proxy function (NOT directly Google Apps Script)
                const response = await fetch("/.netlify/functions/proxy", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(orderData)
                });

                const result = await response.json();
                console.log("Saved!", result);

                if (result.status === 'success') {
                    // Show success message
                    const thankYouMessage = document.getElementById('thankYouMessage');
                    thankYouMessage.classList.add('show');

                    // Reset form
                    document.getElementById('orderForm').reset();
                    selectedSize = 'L';

                    // Reset selectors to default
                    document.querySelectorAll('.size-option').forEach(size => {
                        size.classList.remove('active');
                        if (size.innerText === 'L') size.classList.add('active');
                    });

                    document.querySelectorAll('.bundle-option').forEach(option => {
                        option.classList.remove('active');
                        if (option.dataset.quantity === '1') option.classList.add('active');
                    });

                    selectedBundle = { price: 350, quantity: 1 };
                    updateOrderButton();

                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        thankYouMessage.classList.remove('show');
                    }, 5000);
                } else {
                    alert('Error submitting order: ' + (result.message || 'Unknown error'));
                }

            } catch (error) {
                console.error('Error:', error);
                alert('Error submitting order. Please try again.');
            } finally {
                // Reset button
                orderBtn.disabled = false;
                orderBtn.querySelector('span').textContent = originalText;
            }
        }

        // Zoom functions
        function openZoom(index) {
            currentImageIndex = index;
            const modal = document.getElementById('zoomModal');
            const zoomImage = document.getElementById('zoomImage');
            const counter = document.getElementById('zoomCounter');

            const imageData = productImages[currentImageIndex];
            zoomImage.src = imageData.src;
            zoomImage.alt = imageData.alt;
            counter.textContent = `${currentImageIndex + 1} / ${productImages.length}`;

            // Reset zoom
            zoomLevel = 1;
            translateX = 0;
            translateY = 0;
            updateZoomTransform();

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeZoom(event) {
            if (event && event.target.classList.contains('zoom-image')) {
                return;
            }

            const modal = document.getElementById('zoomModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function zoomIn() {
            zoomLevel = Math.min(3, zoomLevel + 0.3);
            updateZoomTransform();
        }

        function zoomOut() {
            zoomLevel = Math.max(0.5, zoomLevel - 0.3);
            if (zoomLevel <= 1) {
                translateX = 0;
                translateY = 0;
            }
            updateZoomTransform();
        }

        function prevZoomImage() {
            currentImageIndex = currentImageIndex > 0 ? currentImageIndex - 1 : productImages.length - 1;
            updateZoomImage();
        }

        function nextZoomImage() {
            currentImageIndex = currentImageIndex < productImages.length - 1 ? currentImageIndex + 1 : 0;
            updateZoomImage();
        }

        function updateZoomImage() {
            const zoomImage = document.getElementById('zoomImage');
            const counter = document.getElementById('zoomCounter');
            const imageData = productImages[currentImageIndex];

            zoomImage.src = imageData.src;
            zoomImage.alt = imageData.alt;
            counter.textContent = `${currentImageIndex + 1} / ${productImages.length}`;

            // Reset zoom
            zoomLevel = 1;
            translateX = 0;
            translateY = 0;
            updateZoomTransform();
        }

        function updateZoomTransform() {
            const zoomImage = document.getElementById('zoomImage');
            zoomImage.style.transform = `scale(${zoomLevel}) translate(${translateX}px, ${translateY}px)`;

            if (zoomLevel > 1) {
                zoomImage.classList.add('zoomed');
            } else {
                zoomImage.classList.remove('zoomed');
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function () {
            // Load saved language
            const savedLang = localStorage.getItem('selectedLanguage');
            if (savedLang && translations[savedLang]) {
                changeLanguage(savedLang);
            }

            // Form submission
            document.getElementById('orderForm').addEventListener('submit', submitOrder);

            // Close language menu when clicking outside
            document.addEventListener('click', function (e) {
                const languageDropdown = document.querySelector('.language-dropdown');
                if (!languageDropdown.contains(e.target)) {
                    document.getElementById('languageMenu').classList.remove('active');
                }
            });

            // Zoom modal event listeners
            const zoomModal = document.getElementById('zoomModal');
            const zoomImage = document.getElementById('zoomImage');

            // Mouse wheel zoom
            zoomModal.addEventListener('wheel', function (e) {
                e.preventDefault();
                const delta = e.deltaY > 0 ? -0.2 : 0.2;
                zoomLevel = Math.max(0.5, Math.min(3, zoomLevel + delta));
                updateZoomTransform();
            });

            // Drag functionality
            zoomImage.addEventListener('mousedown', function (e) {
                if (zoomLevel > 1) {
                    isDragging = true;
                    startX = e.clientX - translateX;
                    startY = e.clientY - translateY;
                    e.preventDefault();
                }
            });

            document.addEventListener('mousemove', function (e) {
                if (isDragging && zoomLevel > 1) {
                    translateX = e.clientX - startX;
                    translateY = e.clientY - startY;
                    updateZoomTransform();
                }
            });

            document.addEventListener('mouseup', function () {
                isDragging = false;
            });

            // Touch support for mobile
            let touchStartX = 0;
            let touchStartY = 0;

            zoomImage.addEventListener('touchstart', function (e) {
                if (zoomLevel > 1) {
                    isDragging = true;
                    const touch = e.touches[0];
                    touchStartX = touch.clientX - translateX;
                    touchStartY = touch.clientY - translateY;
                    e.preventDefault();
                }
            });

            zoomImage.addEventListener('touchmove', function (e) {
                if (isDragging && zoomLevel > 1) {
                    const touch = e.touches[0];
                    translateX = touch.clientX - touchStartX;
                    translateY = touch.clientY - touchStartY;
                    updateZoomTransform();
                    e.preventDefault();
                }
            });

            zoomImage.addEventListener('touchend', function () {
                isDragging = false;
            });

            // Keyboard navigation
            document.addEventListener('keydown', function (e) {
                const modal = document.getElementById('zoomModal');
                if (modal.classList.contains('active')) {
                    switch (e.key) {
                        case 'Escape':
                            closeZoom();
                            break;
                        case 'ArrowLeft':
                            prevZoomImage();
                            break;
                        case 'ArrowRight':
                            nextZoomImage();
                            break;
                        case '+':
                        case '=':
                            zoomIn();
                            break;
                        case '-':
                            zoomOut();
                            break;
                    }
                }
            });
        });
    </script>
</body>

</html>